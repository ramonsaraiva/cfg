function ca() {
    pyenv activate ca
    cd ~/dev/consumeraffairs
}

function sca() {
    cd ~/dev/consumeraffairs
    find . -name '*.pyc' -delete
    if [[ "$OSTYPE" == 'darwin17' ]]; then
        sudo nginx
        mysql.server start
    elif [[ "$OSTYPE" == 'linux-gnu' ]]; then
        sudo service nginx start
        sudo service mysql start
    fi
    ./manage.py celery purge
    ./manage.py celeryd -l info -Q celery &
    redis-server &
    ./manage.py runserver
}

function kca() {
    if [[ "$OSTYPE" == 'darwin17' ]]; then
        sudo nginx -s stop
        mysql.server stop
    elif [[ "$OSTYPE" == 'linux-gnu' ]]; then
        sudo service nginx stop
        sudo service mysql stop
    fi
    kill $(ps aux | grep '[r]edis' | awk '{print $2}')
    kill $(ps aux | grep '[c]elery' | awk '{print $2}')
    kill $(ps aux | grep '[p]ython' | awk '{print $2}')
}

function ball() {
    cd ~/dev/styleguide/frontend
    if [[ $# == 0 ]] || [[ $1 == 'qa' ]]; then
        git co qa
        git pull ca qa
    else
        git pr ca $1
    fi
    gulp b
    gulp b -d ../../consumeraffairs/media

    cd ~/dev/frontend
    if [[ $# == 0 ]] || [[ $2 == 'qa' ]]; then
        git co qa
        git pull ca qa
    else
        git pr ca $2
    fi
    gulp b

    cd ~/dev/consumeraffairs
    if [[ $# == 0 ]] || [[ $3 == 'qa' ]]; then
        git co qa
        git pull ca qa
    else
        git pr ca $3
    fi
    gulp docker
}

function m() {
    python manage.py $@
}

alias vim="nvim"

alias ca=ca
alias qca="pyenv deactivate ca"
alias sca=sca
alias kca=kca
alias ball=ball

alias m=m
alias celp="./manage.py celery purge"
alias cel="./manage.py celeryd -l info -Q celery"
alias kcel="kill $(ps aux | grep '[c]elery' | awk '{print $2}')"
alias rf="redis-cli FLUSHALL"
alias rs="python manage.py runserver"
alias rsp="python manage.py runserver_plus"
alias rsl="python manage.py runserver 0.0.0.0:8001"
alias rsm="python manage.py runserver 0.0.0.0:8002"
alias nrs="newrelic-admin run-python manage.py runserver_plus"
alias cpyc="find . -name '*.pyc' -delete"
